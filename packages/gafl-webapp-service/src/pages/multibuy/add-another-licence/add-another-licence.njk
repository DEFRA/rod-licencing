{% extends "layout.njk" %}

{% from "back-link/macro.njk" import govukBackLink %}
{% from "table/macro.njk" import govukTable %}
{% from "radios/macro.njk" import govukRadios %}
{% from "button/macro.njk" import govukButton %}

{% set licenceTableRows = [] %}

{% for licence in data.licences %}
    {{ licenceTableRows.push({
        text: licence.licenceHolder,
        text: licence.type,
        text: licence.length,
        text: licence.start,
        text: 'Â£' + licence.price,
        html: <a href="/buy/licence-summary">Change</a>
    }) }}
{% endfor %}

{% block content %}
<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">

      {{ govukTable({
        caption: "Licences",
        captionClasses: "govuk-table__caption--m",
        head: [
          { text: "Licence Holder" },
          { text: "Type" },
          { text: "Length" },
          { text: "Starts" },
          { text: "Price" }
        ],
        rows: licenceTableRows
      }) }}

    </div>
</div>

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <form method="post">
            {{ govukRadios({
              idPrefix: "buy-another-licence",
              name: "buy-another-licence",
              fieldset: {
                legend: {
                  text: "Would you like to get another licence?",
                  isPageHeading: true,
                  classes: "govuk-fieldset__legend--l"
                }
              },
              items: [
                { value: "yes", text: "Yes" },
                { value: "no", text: "No" }
              ],
              errorMessage: { text: 'Choose one option' } if error['buy-another-licence']
            }) }}

            {{ govukButton({
                attributes: { id: 'continue' },
                preventDoubleClick: true,
                name: "continue",
                text: "Continue",
                classes: "govuk-!-margin-top-5"
            }) }}
            {{ csrf() }}
        </form>
    </div>
</div>
{% endblock %}